{% extends "layout.html" %}
{% block content %}
    <h1 class="text-center">Search for a Licence</h1>
    <ul id="rule-list" class="list-group ml-5 mr-5"></ul>
    <div class="text-center mt-5">
        <button type="button" class="btn btn-primary search-button w-200">Filter Licences</button>
    </div>
    <div class="row mt-5">
        <div id="results-all" class="col-md-12 text-center"></div>
    </div>
    <div id="results-template" hidden>
        <h2>Results</h2>
        <div id="perfect-licence-header" class="row mt-3 mb-3" hidden>
            <div class="col-md-1">
                <i class="fas fa-check-circle fa-3x text-success"></i>
            </div>
            <div class="col-md-11 mt-2 text-success">
                <h3>The following licences are a perfect fit with your requirements</h3>
            </div>
        </div>
        <div id="extra-licence-header" class="row mt-3 mb-3" hidden>
            <div class="col-md-1 mt-2">
                <i class="fas fa-exclamation-circle fa-3x text-warning"></i>
            </div>
            <div class="col-md-11 text-warning">
                <h3>The following licences are compatible with your requirements, but have extra conditions</h3>
            </div>
        </div>
        <div id="insufficient-licence-header" class="row mt-3 mb-3" hidden>
            <div class="col-md-1">
                <i class="fas fa-times-circle fa-3x text-danger"></i>
            </div>
            <div class="col-md-11 mt-2 text-danger">
                <h3>The following licences are missing some requirements</h3>
            </div>
        </div>
    </div>
    <div id="perfect-licence-template" hidden>
        <div class="card perfect-licence">
            <div class="card-header mouseover" data-toggle="collapse" data-target="#perfect-licence-1">
                <h5 class="mb-0">Licence #1</h5>
            </div>
            <div id="perfect-licence-1" class="collapse">
                <div class="card-body text-center">
                    <a href="#!" type="button" class="btn btn-primary">See Licence</a>
                </div>
            </div>
        </div>
    </div>
    <div id="extra-licence-template" hidden>
        <div class="card extra-licence">
            <div class="card-header mouseover" data-toggle="collapse" data-target="#extra-licence-1">
                <h5 class="mb-0"></h5>
            </div>
            <div id="extra-licence-1" class="collapse">
                <div class="card-body text-center">
                    <h5>This licence has these additional conditions:</h5>
                    <table class="table table-bordered">
                        <tbody>
                            <tr>
                                <th>Permissions</th>
                                <td class="text-left"></td>
                            </tr>
                            <tr>
                                <th>Duties</th>
                                <td class="text-left"></td>
                            </tr>
                            <tr>
                                <th>Prohibitions</th>
                                <td class="text-left"></td>
                            </tr>
                        </tbody>
                    </table>
                    <a href="#!" type="button" class="btn btn-primary">See Licence</a>
                </div>
            </div>
        </div>
    </div>
    <div id="insufficient-licence-template" hidden>
        <div class="card">
            <div class="card-header mouseover" data-toggle="collapse" data-target="#insufficient-conditions-1">
                <h5 class="mb-0">Licence #7</h5>
            </div>
            <div id="insufficient-conditions-1" class="collapse">
                <div class="card-body text-center">
                    <h5>This licence is missing these requirements:</h5>
                    <table class="table table-bordered">
                        <tbody>
                            <tr>
                                <th>Permissions</th>
                                <td class="text-left"></td>
                            </tr>
                            <tr>
                                <th>Duties</th>
                                <td class="text-left"></td>
                            </tr>
                            <tr>
                                <th>Prohibitions</th>
                                <td class="text-left"></td>
                            </tr>
                        </tbody>
                    </table>
                    <a href="#!" type="button" class="btn btn-primary">See Licence</a>
                </div>
            </div>
        </div>
    </div>
    <ul id="rule-list-template" hidden>
        <li class="list-group-item font-weight-bold active">Filter:</li>
        <li id="permission-header" class="list-group-item font-weight-bold">
            Permissions <i class="fas fa-plus fa-lg text-success floatright" data-toggle="modal" data-target="#addPermissionModal"></i>
        </li>
        <li id="duty-header" class="list-group-item font-weight-bold">
            Duties <i class="fas fa-plus fa-lg text-success floatright" data-toggle="modal" data-target="#addDutyModal"></i>
        </li>
        <li id="prohibition-header" class="list-group-item font-weight-bold">
            Prohibitions <i class="fas fa-plus fa-lg text-success floatright" data-toggle="modal" data-target="#addProhibitionModal"></i>
        </li>
        <div id="end-rule-list"></div>
    </ul>
    <div id="rule-item-template" hidden>
        <li class="list-group-item">
            <div class="ml-3">
                <a target="_blank" href=""></a>
                <i class="fas fa-times fa-lg text-danger delete-rule-item ml-1"></i>
            </div>
            <div class="ml-4 assignors" hidden></div>
            <div class="ml-4 assignees" hidden></div>
        </li>
    </div>
    <div id="party-item-template" hidden>
        <li class="list-group-item p-1">
            <div class="list-group-item-label pl-1"></div>
            <i class="fas fa-times text-danger delete-party-item floatright p-1"></i>
        </li>
    </div>
    <div id="addPermissionModal" class="modal add-rule-modal permission fade" tabindex="-1" role="dialog" aria-labelledby="permissionModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content text-center">
                <div class="modal-header">
                    <h5 class="modal-title" id="permissionModalTitle">Add Permission</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="input-group mb-4">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Action</span>
                        </div>
                        <select class="form-control action-select permission">
                            {% for action in actions %}
                            <option data-action-uri="{{ action['URI'] }}" data-action-link="{{ action['LINK'] }}">{{ action['LABEL'] }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary add-rule" data-dismiss="modal">Add</button>
                </div>
            </div>
        </div>
    </div>
    <div id="addDutyModal" class="modal add-rule-modal duty fade" tabindex="-1" role="dialog" aria-labelledby="dutyModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content text-center">
                <div class="modal-header">
                    <h5 class="modal-title" id="dutyModalTitle">Add Permission</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="input-group mb-4">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Action</span>
                        </div>
                        <select class="form-control action-select duty">
                            {% for action in actions %}
                            <option data-action-uri="{{ action['URI'] }}" data-action-link="{{ action['LINK'] }}">{{ action['LABEL'] }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary add-rule" data-dismiss="modal">Add</button>
                </div>
            </div>
        </div>
    </div>
    <div id="addProhibitionModal" class="modal add-rule-modal prohibition fade" tabindex="-1" role="dialog" aria-labelledby="prohibitionModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content text-center">
                <div class="modal-header">
                    <h5 class="modal-title" id="prohibitionModalTitle">Add Permission</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="input-group mb-4">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Action</span>
                        </div>
                        <select class="form-control action-select prohibition">
                            {% for action in actions %}
                            <option data-action-uri="{{ action['URI'] }}" data-action-link="{{ action['LINK'] }}">{{ action['LABEL'] }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary add-rule" data-dismiss="modal">Add</button>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block bottom_script %}
    <script src="{{ url_for('static', filename='js/licence_register.js') }}"></script>
{% endblock %}